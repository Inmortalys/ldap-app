<div class="settings-container">
    <div class="header">
        <h1>‚öôÔ∏è Configuraci√≥n LDAP</h1>
    </div>

    <div *ngIf="loading" class="loading-spinner">
        <div class="spinner"></div>
        <p>Cargando configuraci√≥n...</p>
    </div>

    <div *ngIf="!loading" class="settings-form">
        <div *ngIf="error" class="message error-message">
            {{ error }}
        </div>

        <div *ngIf="success" class="message success-message">
            {{ success }}
        </div>

        <div class="form-section">
            <h2>Servidor LDAP (Solo Lectura)</h2>
            <p class="section-desc">Esta configuraci√≥n se carga desde el archivo .env del servidor.</p>

            <div class="form-group">
                <label for="server">Servidor</label>
                <input id="server" type="text" [value]="config.server" readonly class="form-input readonly" />
            </div>

            <div class="form-group">
                <label for="port">Puerto</label>
                <input id="port" type="number" [value]="config.port" readonly class="form-input readonly" />
            </div>

            <div class="form-group">
                <label for="baseDN">Base DN</label>
                <input id="baseDN" type="text" [value]="config.baseDN" readonly class="form-input readonly" />
            </div>
        </div>

        <div class="form-section">
            <h2>Rutas de B√∫squeda (Search Bases)</h2>
            <p class="section-desc">Gestiona las rutas donde buscar usuarios. Estas se guardan en tu navegador.</p>

            <div class="add-search-base">
                <div class="form-group">
                    <label for="newSearchBase">Nueva Ruta de B√∫squeda</label>
                    <div class="input-group">
                        <input id="newSearchBase" type="text" [(ngModel)]="newSearchBase" (input)="clearMessages()"
                            placeholder="OU=Usuarios,DC=ejemplo,DC=com" class="form-input" />
                        <button class="btn btn-add" (click)="addSearchBase()" [disabled]="!newSearchBase">
                            ‚ûï A√±adir
                        </button>
                    </div>
                </div>
            </div>

            <div class="search-bases-list">
                <h3>Rutas Guardadas</h3>
                <div *ngIf="customSearchBases.length === 0" class="empty-state">
                    No hay rutas guardadas.
                </div>
                <ul class="base-list">
                    <li *ngFor="let base of customSearchBases" class="base-item">
                        <span class="base-text">{{ base }}</span>
                        <button class="btn-icon delete" (click)="removeSearchBase(base)" title="Eliminar">
                            üóëÔ∏è
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>